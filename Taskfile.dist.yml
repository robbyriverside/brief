version: '3'

tasks:
  build:
    cmds:
      - go build -v  -ldflags="-X main.SemVer={{.SEMVER}}" -o brief cmd/brief/main.go
    vars:
      SEMVER:
        sh: git describe --tags --always

  install:
    dir: cmd/brief
    cmds:
      - go install -ldflags="-X main.SemVer={{.SEMVER}}"
    vars:
      SEMVER:
        sh: git describe --tags --always

